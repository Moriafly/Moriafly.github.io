(window.webpackJsonp=window.webpackJsonp||[]).push([["breakingNews"],{HdLz:function(e,t){},QU5F:function(e,t,n){"use strict";n.r(t),n.d(t,"BreakingNews",(function(){return J})),n.d(t,"BreakingNewsActions",(function(){return o})),n.d(t,"BreakingNewsConnector",(function(){return q})),n.d(t,"BreakingNewsReducer",(function(){return F})),n.d(t,"ToolingInfo",(function(){return z}));var i=n("+viU"),a=n("dBh6"),s=n("G82u");const o={EnableBlowout:new s.a("EnableBlowout"),SetData:new s.a("SetData"),BlowoutVisible:new s.a("BlowoutVisible"),SwitchDismissed:new s.a("SwitchDismissed")};var r=n("5mwN"),c=n("ERkP"),l=n.n(c),d=n("FPTP"),h=n("y2Il"),u=n("+Tyi");const g=e=>l.a.createElement("svg",Object.assign({},e,{width:"18",height:"10",viewBox:"0 0 18 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),l.a.createElement("path",{d:"M0.958008 9.89551L0.166993 9.10449L9 0.271484L17.833 9.10449L17.042 9.89551L9 1.85351L0.958008 9.89551Z",fill:"currentColor"}));class b extends r.a{constructor(){super(...arguments),this.handledProps=Object.assign(Object.assign({},r.b),{blowoutEnabled:void 0,contentLayout:void 0,data:void 0,dismissed:void 0,displayConfig:void 0,ignoreMethod:void 0,loadState:void 0,managedClasses:void 0,open:void 0,switchAction:void 0})}render(){super.render();const{contentLayout:e,data:t,dismissed:n,loadState:i}=this.props;switch(i){case 2:return t&&t.headline&&t.headlineLead?l.a.createElement(l.a.Fragment,null,n?null:this.renderBanner(),l.a.createElement(u.a,Object.assign({},e,{requestContext:this.props.requestContext}))):null;case 1:default:return null}}renderBanner(){const{blowoutEnabled:e,data:t,displayConfig:n,dismissed:i,managedClasses:a}=this.props,{breakingNews:s,breakingNews_headline:o,breakingNews_text:r,breakingNews_headlineLink:c}=a,h={backgroundColor:n.backgroundColor,color:n.textColor,textAlign:n.center?"center":"unset"};return n.margin&&(h.margin=n.margin),l.a.createElement("div",Object.assign({},this.unhandledProps(),{id:"bnb",role:"alert",style:h,className:this.generateClassNames(s)}),l.a.createElement("a",Object.assign({target:"_blank",href:t.headlineLink||null,className:c},t.linkTelemetryTags),l.a.createElement("div",{className:n.wrapHeadline?null:o},l.a.createElement(d.a,Object.assign({},n.headlineLead,{style:{fontWeight:n.leadFontWeight,textTransform:n.uppercaseLead?"uppercase":"unset"},className:r}),t.headlineLead,t.headlineLead&&t.headlineLink?": ":" "),l.a.createElement(d.a,Object.assign({},n.headline,{className:r}),t.headline))),e&&!i?this.renderSwitch():null)}renderSwitch(){const{data:e,open:t,managedClasses:n,ignoreMethod:i,displayConfig:a,switchAction:s}=this.props,{breakingNews_switch:o,breakingNews_text:r,breakingNews_arrow_open:c,breakingNews_arrow_closed:u}=n,b=Math.max(a.button.collapse.length,a.button.expand.length);switch(i){case"dismiss":return l.a.createElement("div",Object.assign({className:o},e.buttonTelemetryTags,{onClick:s}),l.a.createElement(d.a,{children:a.button.dismiss,tag:h.b.span,size:h.a._7,style:{minWidth:b+"ch",textAlign:"end"},className:r}));case"collapse":default:return l.a.createElement("div",Object.assign({className:o},e.buttonTelemetryTags,{onClick:s}),l.a.createElement(d.a,{children:t?a.button.collapse:a.button.expand,tag:h.b.span,size:h.a._7,style:{minWidth:b+"ch",textAlign:"end"},className:r}),l.a.createElement(g,{className:t?c:u}))}}}b.defaultProps={experienceName:"BreakingNews"};var w=n("HdLz"),m=n("D57K");var p,f=n("tMmC"),v=n("HxRh"),k=n("s9+9"),O=n("Zn5T"),y=n("9J8d"),S=n("dTwT"),E=n("mzbC"),j=n("rvYQ"),C=n("I6Lx");function N(e){if(!e)throw new Error("No data passed to schema transformer");const t=e;let n;if(function(e){return e&&e.headlines&&e.headlines instanceof Array&&e.headlines.length>=3&&e.headlines[0].title.indexOf(p.BreakingNewsTitle)>-1&&e.headlines[1].title.indexOf(p.BreakingNewsHeadline)>-1}(t)&&(n=t),!n)throw new Error("Unable to find an acceptable document");return n}!function(e){e.BreakingNewsTitle="Breaking News Title",e.BreakingNewsHeadline="Breaking News Headline"}(p||(p={}));var x=n("u5KZ");const B={path:["v1","cms","api","amp"],blowoutSearch:{$select:"$type,_id,_name,_locale"}};function L(e){return Object(m.b)(this,void 0,void 0,(function*(){e||_(`Unable to find content id in ${C.b?C.b.Locale:""} config`);const t=new URLSearchParams(document.location.search).get("forceBreakingNews"),n=(e=>{const t=new URL("/breakingnews/",j.b.ContentServiceUrlBase),n=[...B.path];return n.push("article"),n.push(e),t.pathname+=n.join("/"),t})(t||e),i=yield fetch(n.href);i.ok||_("Error in Response: "+i.statusText);const a=yield i.json();try{return function(e){return{headlineLead:e.headlines[0].kicker,headline:e.headlines[1].kicker,headlineLink:e.headlines[2].kicker}}(N(a))}catch(e){_(e)}}))}function A(e="breakingNews_blowout"){return Object(m.b)(this,void 0,void 0,(function*(){const t=(e=>{const t=j.b.ContentServiceUrlBase,n=new URL("",t),i=[...B.path];if(Object.keys(B.blowoutSearch).forEach(e=>{n.searchParams.set(e,B.blowoutSearch[e])}),i.push("search"),!C.b.Locale)throw new Error("No locale set");return n.searchParams.set("$filter",`'_name' eq '${e}' and '$type' eq 'topicGrouping' and '_locale' eq '${C.b.Locale}'`),n.pathname+=i.join("/"),n})(e),n=yield fetch(t.href);return function(e){if(!e)throw new Error("No data from CMS query");e instanceof Array&&(e=e[0]);const t=e;if(!t||!t._id)throw new Error("Unable to find an acceptable blowout document");return t._id}(yield n.json())}))}function _(e){throw x.a.sendAppErrorEvent(Object.assign(Object.assign({},v.J.ContentFetchError),{message:e})),new Error(e)}var D=n("o5QJ"),T=n("BlQW");const P={inspect(e){const t=T.a.inspect(e),{missingChildren:n,props:i}=t,{state:a,config:s,connectorArgs:o={}}=e,{loadState:r,data:c,blowoutEnabled:l,open:d,dismissed:h}=a,{switchAction:u=(()=>{})}=o;return{props:{displayConfig:s.displayConfig,ignoreMethod:s.ignoreMethod,loadState:r,data:c,open:d,blowoutEnabled:l,dismissed:h,switchAction:u,contentLayout:Object.assign({},i),requestContext:o.requestContext},missingChildren:n}}};var U=n("WfnD"),I=n("Am8i");var R=n("A8DD");class q extends U.a{constructor(e,t,n,i,a,s,r){super(e,t,n,i,a,function(e){const t=e,n=Object.assign({displayConfig:t.layout},t);return delete n.layout,n}(s),r),this.switchOpen=()=>{const{open:e}=this.getCurrentState();switch(this.config.ignoreMethod){case"dismiss":o.SwitchDismissed.getActionSender(this).send(!0),D.a.switchOpen.getGlobalActionSender().send(!1);break;case"collapse":default:o.BlowoutVisible.getActionSender(this).send(!e),D.a.switchOpen.getGlobalActionSender().send(!e)}}}mapStateToProps(e){const t={switchAction:this.switchOpen,requestContext:this.requestContext},n=P.inspect({config:this.config,connectorArgs:t,state:e,children:this.childComponentInstanceList});return Object.assign(Object.assign({},this.telemetryTags),n.props)}onComponentConnect(e){return Object(m.b)(this,void 0,void 0,(function*(){yield U.a.prototype.onComponentConnect.call(this,e),e.dontFetchData||this.initiateDataFetch().catch(e=>{f.a.logError(e),o.SetData.getActionSender(this).send(3)})}))}initiateDataFetch(){return Object(m.b)(this,void 0,void 0,(function*(){const e=y.a.getInstance().rootReducer.connector(k.a.PageSettingsData);if(!e||e.riverExperiencesEnabled()){if(e&&e.riverExperiencesEnabled())return this.fetchDataOnPageReveal();{const e={cancel:!1},t=this.fetchDataOnPageReveal(e);return E.a.initialize.registerObserver(()=>{y.a.getInstance().rootReducer.connector(k.a.PageSettingsData).riverExperiencesEnabled()||(e.cancel=!0,o.SetData.getActionSender(this).send(0))}),t}}}))}fetchBlowoutId(){return Object(m.b)(this,void 0,void 0,(function*(){try{const e=new URLSearchParams(document.location.search).get("blowoutId");if(e)this.determineBlowoutVisibility(e);else{const e=yield A();e&&this.determineBlowoutVisibility(e)}}catch(e){let t;"object"==typeof e?t=e.toString():"string"==typeof e&&(t=e),x.a.sendAppErrorEvent(Object.assign(Object.assign({},v.J.BlowoutDocumentFetchError),{message:e.message}))}}))}fetchDataOnPageReveal(e){return Object(m.b)(this,void 0,void 0,(function*(){if(yield Promise.all([Object(R.a)(),this.requestPageVisibleAsync()]),e&&e.cancel)return;o.SetData.getActionSender(this).send(1);let t=yield L(this.config.contentId);this.telemetryObject&&0!==Object.keys(this.telemetryObject).length&&(t=function(e,t){let n;n=t.headlineLead?t.headlineLead&&t.headline?t.headlineLead+": "+t.headline:t.headlineLead:"";const i=e.addOrUpdateChild({name:"Link",behavior:I.b.Navigate,content:{headline:n},destinationUrl:t.headlineLink,type:I.e.ActionButton}),a=e.addOrUpdateChild({name:"Button",behavior:I.b.Customize,content:{headline:""},destinationUrl:"",type:I.e.ActionButton});return Object.assign(Object.assign({},t),{linkTelemetryTags:i.render(),buttonTelemetryTags:a.render()})}(this.telemetryObject,t)),this.childMap.has(O.a.blowout)&&this.fetchBlowoutId(),e&&e.cancel||o.SetData.getActionSender(this).send(2,t)}))}determineBlowoutVisibility(e){if(!e)return void o.SwitchDismissed.getActionSender(this).send(!0);let t=!1,n=!1;switch(this.config.ignoreMethod){case"dismiss":{const i=S.a.getItem("blowout_dismiss");i===e?n=!0:(i&&S.a.removeItem("blowout_dismiss"),t=!0);break}case"collapse":default:{const n=S.a.getItem("blowout_dismiss");n===e?t=!1:(n&&S.a.removeItem("blowout_dismiss"),t=!0)}}o.EnableBlowout.getActionSender(this).send(!0,t,n),D.a.enableExperience.getGlobalActionSender().send(e,t,n)}}var M=n("05Au");class F{reduce(e,t){if(!e)return{blowoutEnabled:!1,dismissed:!1,loadState:0,open:!1};if(!t)return e;let n,i=!1;return i=M.a.handleAction(t,o.SetData,(t,i)=>{n=Object.assign(Object.assign({},e),{data:i,loadState:t})}),i=M.a.handleAction(t,o.EnableBlowout,(t,i,a)=>{n=Object.assign(Object.assign({},e),{blowoutEnabled:t||e.blowoutEnabled,open:null!=i?i:e.open,dismissed:null!=a?a:e.dismissed})}),i=M.a.handleAction(t,o.SwitchDismissed,t=>{n=Object.assign(Object.assign({},e),{dismissed:null!=t?t:e.dismissed})}),i=M.a.handleAction(t,o.BlowoutVisible,t=>{n=Object.assign(Object.assign({},e),{open:null!=t?t:e.open})}),n||e}}var V=n("Jw3B");const J=Object(i.a)(e=>({breakingNews:{display:"grid","align-items":"center","min-height":"38px","grid-template-columns":"1fr","-ms-grid-columns":"1fr",overflow:"hidden","border-radius":e.cornerRadius+"px",padding:"0 24px",[Object(V.e)(null,V.a.c1)]:{padding:"0 6px"},"& a":{color:"inherit","text-decoration":"unset"},"& a:link:hover":{"text-decoration":"underline"}},breakingNews_headline:{"text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"},breakingNews_headlineLink:{overflow:"hidden"},breakingNews_text:{"&&":{color:"inherit",cursor:"inherit"}},breakingNews_switch:{color:"inherit","justify-self":"flex-end","grid-column":"3",display:"grid","grid-gap":"10px","grid-template-columns":"min-content min-content","align-items":"center",cursor:"pointer"},breakingNews_arrow_open:{},breakingNews_arrow_closed:{transform:"rotate(0.5turn)"}}))(b),z={reactComponent:J,experienceConfigSchema:w.BreakingNewsConfigSchema,inspector:P.inspect,mockConfig:a.mockConfig,mockState:a.mockStates}},dBh6:function(e,t){},o5QJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("G82u");const a={switchOpen:new i.a("BlowoutVisible"),switchTransitioning:new i.a("SetTransitioning"),switchCanOpen:new i.a("SwitchCanOpen"),setData:new i.a("BlowoutSetData"),switchDismissed:new i.a("SwitchDismissed"),enableExperience:new i.a("EnableExperience")}}}]);